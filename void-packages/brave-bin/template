# Template file for 'brave-bin'
pkgname=brave-bin
version=1.45.114
revision=1
only_for_archs="x86_64"
short_desc="Secure, fast and private web browser with ad blocker"
maintainer="Osama <iosamaify@gmail.com>"
license="Mozilla Public License Version 2.0"
homepage="https://brave.com"
distfiles="https://github.com/brave/brave-browser/releases/download/v${version}/brave-browser_${version}_amd64.deb"
checksum=b1395d2edc72493ab833050290c7ec0e134c16aa98c211450fc0ad58cfe9aac1
nostrip=yes

do_extract() {
	ar p "${XBPS_SRCDISTDIR}/${pkgname}-${version}/brave-browser_${version}_amd64.deb" data.tar.xz | bsdtar --extract --xz -f - -C .
}

do_install() {
	vbin ${FILESDIR}/brave.sh brave

	vmkdir opt/brave.com
	vcopy opt/brave.com opt/

	vmkdir usr/share
	vcopy usr/share/applications usr/share/
	vcopy usr/share/appdata usr/share/
	vcopy usr/share/man usr/share/

	vlicense opt/brave.com/brave/LICENSE

	for size in 24 32 48 64 128 256; do
		mkdir -p ${DESTDIR}/usr/share/icons/hicolor/${size}x${size}/apps
		mv ${DESTDIR}/opt/brave.com/brave/product_logo_${size}.png \
			${DESTDIR}/usr/share/icons/hicolor/${size}x${size}/apps/brave-browser.png
	done
}
